<!-- SOLO EL BODY Y CSS AJUSTADOS -->
<style>
body {
  min-height:100vh;
  background:#f8b4c6;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  padding:20px;
  overflow-x:hidden;
  transition: background 1s;
}

body.opened {
  background: #f8b4c6 url('fondo-flores.jpg') no-repeat center top;
  background-size: contain;
}

.hint { color:white; font-size:20px; margin-bottom:30px; text-shadow:0 2px 10px rgba(0,0,0,0.3); animation:float 2s infinite; transition:all 0.8s; }
.hint.hide { opacity:0; transform:translateY(-30px); }

.envelope-container { width:320px; height:220px; position:relative; cursor:pointer; margin-bottom:50px; z-index:2; }
.envelope { width:100%; height:100%; background:#ff6f91; border-radius:8px; position:relative; overflow:hidden; box-shadow:0 15px 35px rgba(0,0,0,0.3); animation:idle 3s infinite ease-in-out; transition:transform 0.3s; }
.envelope:hover { transform:scale(1.02); }
.flap { position:absolute; top:0; left:0; width:100%; height:100%; background:#ff8fab; clip-path:polygon(0 0,100% 0,50% 50%); transform-origin:top center; transition: transform 1.2s ease; z-index:3; }
.envelope-container.open .flap { transform: rotateX(180deg); }
.envelope-container.open .envelope { animation: chest 1s forwards; }

@keyframes idle {0%,100%{transform:scale(1);}50%{transform:scale(1.05);}}
@keyframes chest {0%{transform:scale(1);}50%{transform:scale(1.15) rotate(-2deg);}100%{transform:scale(1);}}

.letter {
  background: transparent; /* transparente para que se vea el contorno de flores */
  max-width: 420px;
  width: 85%;
  border-radius:15px;
  padding:15px 10px 20px 10px;
  margin:0 auto;
  box-shadow:0 15px 35px rgba(0,0,0,0.2);
  opacity:1;
  transition: all 1s ease;
  display:flex;
  flex-direction:column;
  align-items:center;
}

.letter.hide { opacity:0; transform:translateY(-200px); } /* desaparece al abrir */

.letter h1 { color:#d6336c; font-size:20px; text-align:center; margin-bottom:12px; }
.letter img { width:75%; max-width:260px; border-radius:10px; margin-bottom:10px; }

#message { font-size:15px; line-height:1.5; text-align:center; min-height:70px; margin-bottom:15px; }

.bouquet-container {
  width:180px;
  height:auto;
  background:url('ramo-flores.png') no-repeat center center;
  background-size:contain;
  transform: scale(0);
  opacity:0;
  transition: all 1s ease;
}

.letter.show .bouquet-container {
  transform: scale(1);
  opacity:1;
}
</style>

<body>
<h2 class="hint" id="hint">Haz click en la carta ðŸ’Œ</h2>

<div class="envelope-container" id="envelopeContainer">
  <div class="envelope">
    <div class="flap"></div>
  </div>
</div>

<div class="letter" id="letter">
  <h1>Hola mi amor ðŸ’•</h1>
  <img src="foto.jpg" alt="Para ti">
  <div id="message"></div>
  <div class="bouquet-container"></div>
</div>

<script>
const message = `Esta pagina es solo para ti.
Gracias por estar conmigo.
Te quiero mas de lo que estas palabras pueden decir.`;

let charIndex = 0;
function typeWriter() {
  if(charIndex < message.length){
    const char = message.charAt(charIndex);
    document.getElementById("message").innerHTML += char === "\n" ? "<br>" : char;
    charIndex++;
    setTimeout(typeWriter,50);
  }
}

document.getElementById("envelopeContainer").onclick = function(){
  this.classList.add("open"); // abrir sobre
  document.getElementById("hint").classList.add("hide"); // ocultar hint

  // ocultar carta original
  const letter = document.getElementById("letter");
  letter.classList.add("hide");

  // mostrar carta con ramo desde el centro
  setTimeout(()=>{
    letter.classList.remove("hide");
    letter.classList.add("show");
    typeWriter();
  },1200);
};
</script>
</body>
